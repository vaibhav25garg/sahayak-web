<div class="mb-3">
  <strong>Task:</strong> {{ log.task.id|default:"â€”" }}<br>
  <strong>Action:</strong>
  <span class="badge bg-warning">{{ log.action|title }}</span><br>
  <strong>Status:</strong> {{ log.status }}<br>
  <strong>Date:</strong> {{ log.created_at|date:"d M Y H:i" }}
</div>

<hr>

<h6>ğŸ‘¤ Customer</h6>
<p>
  {{ log.name }}<br>
  {{ log.phone }}<br>
  {{ log.location }}
</p>

<hr>

<h6>ğŸ‘· Worker</h6>
<p>
  {{ log.worker.name|default:"Not Assigned" }}
</p>    

<hr>

{% if log.changes %}
<h6>ğŸ” Changes</h6>
<table class="table table-sm table-bordered">
  <thead>
    <tr>
      <th>Field</th>
      <th>Old</th>
      <th>New</th>
    </tr>
  </thead>
  <tbody>
    {% for field, diff in log.changes.items %}
    <tr>
      <td><strong>{{ field }}</strong></td>
      <td class="text-danger">{{ diff.old }}</td>
      <td class="text-success">{{ diff.new }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p class="text-muted">No field-level changes recorded.</p>
{% endif %}
